!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-gauge",["exports","@angular/core","@angular/common"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["ngx-gauge"]={},t.ng.core,t.ng.common)}(this,(function(t,e,i){"use strict";function n(t,e){return void 0===e&&(e=0),isNaN(parseFloat(t))||isNaN(Number(t))?e:Number(t)}function a(t){return t+"px"}var r=function(){};r.decorators=[{type:e.Directive,args:[{selector:"ngx-gauge-append",exportAs:"ngxGaugeAppend"}]}];var s=function(){};s.decorators=[{type:e.Directive,args:[{selector:"ngx-gauge-prepend",exportAs:"ngxGaugePrepend"}]}];var o=function(){};o.decorators=[{type:e.Directive,args:[{selector:"ngx-gauge-value",exportAs:"ngxGaugeValue"}]}];var h=function(){};h.decorators=[{type:e.Directive,args:[{selector:"ngx-gauge-label",exportAs:"ngxGaugeLabel"}]}];var l=0,c=100,u="arch",g=4,p="rgba(0, 150, 136, 1)",d="rgba(0, 0, 0, 0.1)",_="butt",f=200,y=function(){function t(t,e){this._elementRef=t,this._renderer=e,this._size=f,this._min=l,this._max=c,this._animate=!0,this._initialized=!1,this._animationRequestID=0,this.ariaLabel="",this.ariaLabelledby=null,this.type=u,this.cap=_,this.thick=g,this.shadowColor="",this.foregroundColor=p,this.backgroundColor=d,this.thresholds=Object.create(null),this.preserveThresholds=!1,this.thumb=!1,this._value=0,this.duration=1200}return Object.defineProperty(t.prototype,"size",{get:function(){return this._size},set:function(t){this._size=n(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(t){this._min=n(t,l)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"animate",{get:function(){return this._animate},set:function(t){this._animate=function(t){return null!=t&&""+t!="false"}(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(t){this._max=n(t,c)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){this._value=n(t)},enumerable:!1,configurable:!0}),t.prototype.ngOnChanges=function(t){var e=t.thick||t.type||t.cap||t.size,i=t.value||t.min||t.max;if(this._initialized){if(i){var n=void 0,a=void 0;t.value&&(n=t.value.currentValue,a=t.value.previousValue),this._update(n,a)}e&&(this._destroy(),this._init())}},t.prototype._updateSize=function(){this._renderer.setStyle(this._elementRef.nativeElement,"width",a(this._getWidth())),this._renderer.setStyle(this._elementRef.nativeElement,"height",a(this._getCanvasHeight())),this._canvas.nativeElement.width=this._getWidth(),this._canvas.nativeElement.height=this._getCanvasHeight(),this._renderer.setStyle(this._label.nativeElement,"transform","translateY("+(this.size/3*2-this.size/13/4)+"px)"),this._renderer.setStyle(this._reading.nativeElement,"transform","translateY("+(this.size/2-.22*this.size/2)+"px)")},t.prototype.ngAfterViewInit=function(){this._canvas&&this._init()},t.prototype.ngOnDestroy=function(){this._destroy()},t.prototype._getBounds=function(t){var e,i;return"semi"==t?(e=Math.PI,i=2*Math.PI):"full"==t?(e=1.5*Math.PI,i=3.5*Math.PI):"arch"===t&&(e=.8*Math.PI,i=2.2*Math.PI),{head:e,tail:i}},t.prototype._drawShell=function(t,e,i,n){if(this.preserveThresholds)this._drawShellWithSegments(t,e,i);else{var a=this._getCenter(),r=this._getRadius();e=Math.max(e,t),e=Math.min(e,i),this._initialized&&(this._clear(),this._context.beginPath(),this._context.strokeStyle=this.backgroundColor,this._context.arc(a.x,a.y,r,e,i,!1),this._context.stroke(),this._context.beginPath(),this._context.strokeStyle=n,this._context.arc(a.x,a.y,r,t,e,!1),this._context.stroke())}},t.prototype._drawShellWithSegments=function(t,e,i){if(this.thresholds&&this._initialized){var n=Object.keys(this.thresholds),a=i-t,r=(e-t)/a;this._clear();for(var s=this.backgroundColor,o=0;o<n.length;o++){var h=Number(n[o])/100,l=Number(n[o+1])/100||1,c=l-h,u=this.thresholds[n[o]].color,g=this.thresholds[n[o]].fallbackColor||this.backgroundColor;if(r>=h&&r<=l){var p=(r-h)/c,d=t+a*c*p;s=u,this._drawArc(t,d,u),this.shadowColor&&this._drawArcShadow(t,d,this.shadowColor);var _=d+a*c*(1-p);this._drawArc(d,_,g),this.shadowColor&&this._drawArcShadow(d,_,this.shadowColor),t=_}else{var f=h>=r?g:u,y=t+a*c;this._drawArc(t,y,f),this.shadowColor&&this._drawArcShadow(t,y,this.shadowColor),t=y}}this.thumb&&this._drawThumb(e,s)}},t.prototype._drawArc=function(t,e,i){var n=this._getCenter(),a=this._getRadius();this._context.beginPath(),this._context.strokeStyle=i,this._context.arc(n.x,n.y,a,t,e,!1),this._context.stroke()},t.prototype._drawArcShadow=function(t,e,i){var n=this._getCenter(),a=.89*this._getRadius();this._context.beginPath(),this._context.strokeStyle=i,this._context.arc(n.x,n.y,a,t,e,!1),this._context.stroke()},t.prototype._drawThumb=function(t,e){var i=.8*this.thick,n=this._getRadius()*Math.cos(t)+this._getWidth()/2,a=this._getRadius()*Math.sin(t)+this._getHeight()/2;this._context.beginPath(),this._context.arc(n,a,i,0,2*Math.PI,!1),this._context.fillStyle="#fff",this._context.fill(),this._context.lineWidth=this.thick/3,this._context.strokeStyle=e,this._context.stroke(),this._context.lineWidth=this.thick},t.prototype._clear=function(){this._context.clearRect(0,0,this._getWidth(),this._getHeight())},t.prototype._getWidth=function(){return this.size},t.prototype._getHeight=function(){return this.size},t.prototype._getCanvasHeight=function(){return"arch"==this.type||"semi"==this.type?.85*this._getHeight():this._getHeight()},t.prototype._getRadius=function(){return this._getCenter().x-this.thick},t.prototype._getCenter=function(){return{x:this._getWidth()/2,y:this._getHeight()/2}},t.prototype._init=function(){this._context=this._canvas.nativeElement.getContext("2d"),this._initialized=!0,this._updateSize(),this._setupStyles(),this._create()},t.prototype._destroy=function(){this._animationRequestID&&(window.cancelAnimationFrame(this._animationRequestID),this._animationRequestID=0),this._clear(),this._context=null,this._initialized=!1},t.prototype._setupStyles=function(){this._context.lineCap=this.cap,this._context.lineWidth=this.thick},t.prototype._getForegroundColorByRange=function(t){var e=Object.keys(this.thresholds).filter((function(e){return function(t){return null!=t&&!isNaN(parseFloat(t))&&!isNaN(Number(t))}(e)&&Number(e)<=t})).sort((function(t,e){return Number(t)-Number(e)})).reverse()[0];return void 0!==e&&this.thresholds[e].color||this.foregroundColor},t.prototype._create=function(t,e){var i,n=this,a=this.type,r=this._getBounds(a),s=this.duration,o=this.min,h=this.max,l=function(t,e,i){return Math.max(e,Math.min(i,t))}(this.value,this.min,this.max),c=r.head,u=(r.tail-r.head)/(h-o),g=u*(l-o),p=r.tail,d=this._getForegroundColorByRange(l);function _(t){var a=(t=t||(new Date).getTime())-i,r=Math.min(a/s,1),h=c+(e?(e-o)*u:0)+g*r;n._drawShell(c,h,p,d),n._animationRequestID&&a<s?n._animationRequestID=window.requestAnimationFrame((function(t){return _(t)})):window.cancelAnimationFrame(n._animationRequestID)}n._animationRequestID&&window.cancelAnimationFrame(n._animationRequestID),this._animate?(null!=t&&null!=e&&(g=u*t-u*e),n._animationRequestID=window.requestAnimationFrame((function(t){_(i=t||(new Date).getTime())}))):n._drawShell(c,c+g,p,d)},t.prototype._update=function(t,e){this._clear(),this._create(t,e)},t}();y.decorators=[{type:e.Component,args:[{selector:"ngx-gauge",template:'<div class="reading-block" #reading [style.fontSize]="size * 0.22 + \'px\'">\r\n  \x3c!-- This block can not be indented correctly, because line breaks cause layout spacing, related problem: https://pt.stackoverflow.com/q/276760/2998 --\x3e\r\n  <u class="reading-affix" [ngSwitch]="_prependChild != null"><ng-content select="ngx-gauge-prepend" *ngSwitchCase="true"></ng-content><ng-container *ngSwitchCase="false">{{prepend}}</ng-container></u><ng-container [ngSwitch]="_valueDisplayChild != null"><ng-content *ngSwitchCase="true" select="ngx-gauge-value"></ng-content><ng-container *ngSwitchCase="false">{{value | number}}</ng-container></ng-container><u class="reading-affix" [ngSwitch]="_appendChild != null"><ng-content select="ngx-gauge-append" *ngSwitchCase="true"></ng-content><ng-container *ngSwitchCase="false">{{append}}</ng-container></u>\r\n</div>\r\n<div class="reading-label" #rLabel\r\n     [style.fontSize]="size / 13 + \'px\'"\r\n     [ngSwitch]="_labelChild != null">\r\n  <ng-content select="ngx-gauge-label" *ngSwitchCase="true"></ng-content>\r\n  <ng-container *ngSwitchCase="false">{{label}}</ng-container>\r\n</div>\r\n<canvas #canvas></canvas>\r\n',host:{role:"slider","aria-readonly":"true","[class.ngx-gauge-meter]":"true","[attr.aria-valuemin]":"min","[attr.aria-valuemax]":"max","[attr.aria-valuenow]":"value","[attr.aria-label]":"ariaLabel","[attr.aria-labelledby]":"ariaLabelledby"},encapsulation:e.ViewEncapsulation.None,styles:[".ngx-gauge-meter{display:inline-block;text-align:center;position:relative}.reading-block,.reading-label{position:absolute;width:100%;font-weight:400;white-space:nowrap;text-align:center;overflow:hidden;text-overflow:ellipsis}.reading-label{font-family:inherit;display:inline-block}.reading-affix{text-decoration:none;font-size:.6em;opacity:.8;font-weight:200;padding:0 .18em}.reading-affix:first-child{padding-left:0}.reading-affix:last-child{padding-right:0}"]}]}],y.ctorParameters=function(){return[{type:e.ElementRef},{type:e.Renderer2}]},y.propDecorators={_canvas:[{type:e.ViewChild,args:["canvas",{static:!0}]}],_label:[{type:e.ViewChild,args:["rLabel",{static:!0}]}],_reading:[{type:e.ViewChild,args:["reading",{static:!0}]}],_labelChild:[{type:e.ContentChild,args:[h]}],_prependChild:[{type:e.ContentChild,args:[s]}],_appendChild:[{type:e.ContentChild,args:[r]}],_valueDisplayChild:[{type:e.ContentChild,args:[o]}],ariaLabel:[{type:e.Input,args:["aria-label"]}],ariaLabelledby:[{type:e.Input,args:["aria-labelledby"]}],size:[{type:e.Input}],min:[{type:e.Input}],animate:[{type:e.Input}],max:[{type:e.Input}],type:[{type:e.Input}],cap:[{type:e.Input}],thick:[{type:e.Input}],label:[{type:e.Input}],append:[{type:e.Input}],prepend:[{type:e.Input}],shadowColor:[{type:e.Input}],foregroundColor:[{type:e.Input}],backgroundColor:[{type:e.Input}],thresholds:[{type:e.Input}],preserveThresholds:[{type:e.Input}],thumb:[{type:e.Input}],value:[{type:e.Input}],duration:[{type:e.Input}]};var m=function(){};m.decorators=[{type:e.NgModule,args:[{imports:[i.CommonModule],declarations:[y,r,s,o,h],exports:[y,r,s,o,h]}]}],t.NgxGaugeModule=m,t.ɵa=y,t.ɵb=r,t.ɵc=s,t.ɵd=o,t.ɵe=h,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-gauge.umd.min.js.map